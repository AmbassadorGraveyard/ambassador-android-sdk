dependencies:
 pre:
    - curl -sL http://bit.ly/jpm4j >jpm4j.jar
    - sudo java -jar jpm4j.jar -g init
    - sudo jpm install com.codacy:codacy-coverage-reporter:assembly
    - sudo pip install awscli

test:
  override:
    - ./gradlew -p ambassadorsdk jacocoReport
    - cp -r ambassadorsdk/build/reports/jacoco/jacocoReport/* $CIRCLE_TEST_REPORTS
    - cp -r ambassadorsdk/build/reports/tests/debug/* $CIRCLE_TEST_REPORTS
  post:
    - codacy-coverage-reporter -l Java -r $CIRCLE_TEST_REPORTS/jacocoReport.xml
