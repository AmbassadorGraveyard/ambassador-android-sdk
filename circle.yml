dependencies:
 pre:
    - wget "https://services.gradle.org/distributions/gradle-2.9-bin.zip"; unzip gradle-2.9-bin.zip
    - echo y | android update sdk --no-ui --all --filter tool,extra-android-m2repository,extra-android-support,extra-google-google_play_services,extra-google-m2repository,android-23
    - echo y | android update sdk --no-ui --all --filter build-tools-23.0.2
    - curl -sL http://bit.ly/jpm4j >jpm4j.jar
    - sudo java -jar jpm4j.jar -g init
    - sudo jpm install com.codacy:codacy-coverage-reporter:assembly

test:
  override:
    - ./gradlew -p ambassadorsdk jacocoReport
    - cp -r ambassadorsdk/build/reports/jacoco/jacocoReport/* $CIRCLE_TEST_REPORTS
    - cp -r ambassadorsdk/build/reports/tests/debug/* $CIRCLE_TEST_REPORTS
  post:
    - codacy-coverage-reporter -l Java -r $CIRCLE_TEST_REPORTS/jacocoReport.xml
