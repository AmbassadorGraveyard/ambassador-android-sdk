machine:

  timezone:
    America/New_York # Set the timezone
  
  environment:    
    RAINFOREST_TOKEN: $RAINFOREST_TOKEN
    RAINFOREST_SITE: 5193

dependencies:
 pre:
    #- curl -sL http://bit.ly/jpm4j >jpm4j.jar
    #- sudo java -jar jpm4j.jar -g init
    #- sudo jpm install com.codacy:codacy-coverage-reporter:assembly
    - sudo pip install awscli
    - gem install rainforest-cli
    - bash secrets.sh

test:
  override:
    - ./gradlew -p ambassadorsdk jacocoReport
    - cp -r ambassadorsdk/build/reports/jacoco/jacocoReport/* $CIRCLE_TEST_REPORTS
    - cp -r ambassadorsdk/build/reports/tests/debug/* $CIRCLE_TEST_REPORTS
    - ./gradlew -p ambassadorsdk-demo assembleDebug --quiet;
    - ./rainforest.sh
    - bash devicefarm.sh

  #post:
    #- codacy-coverage-reporter -l Java -r $CIRCLE_TEST_REPORTS/jacocoReport.xml
